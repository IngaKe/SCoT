<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

	<title>SCoT - Sense Clustering over Time</title>

	<!-- D3 and vue.js -->
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

	<script type="text/javascript" src="%% url_for('static', filename='render_sense_graph.js') %%"></script>
	<script type="text/javascript" src="%% url_for('static', filename='render_graph_from_file.js') %%"></script>

	 <!-- Stylesheets -->
	<link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap/dist/css/bootstrap.min.css"/>
	<link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css"/>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous"/>
	<link rel= "stylesheet" type= "text/css" href="%% url_for('static', filename='style.css') %%"/>

	<!-- Bootstrap Vue -->
	<script src="https://unpkg.com/vue"></script>
	<script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>
</head>

<body>
<div id="vue-app">
<b-container id="body-container" class="body" fluid>
	<b-navbar type="dark" variant="dark">
		<b-navbar-brand tag="h1" class="header">SCoT senseviewer</b-navbar-brand>
		<b-button id="download_button" variant="success" v-on:click="saveGraph()" download="graph.json" href="">Save Graph</b-button>
		<b-button id="load_button" variant="danger" v-on:click="displayForm()">Load Graph</b-button>
	</b-navbar>

  <b-row id="rows">
    <b-col id="input-options" class="input_options" sm="2">

    	<b-form-group class="input" label="Enter target word">  
			<b-form-input v-model="target_word" placeholder="target word" size="sm"></b-form-input>
		</b-form-group>

		<b-form-group class="input" label="Number of senses">  
			<b-form-input type="number" v-model="senses" min="0" placeholder="number of senses" size="sm"></b-form-input>
		</b-form-group>

		<b-form-group class="input" label="Max. number of edges per node">  
			<b-form-input type="number" v-model="edges" min="0" placeholder="number of edges" size="sm"></b-form-input>
		</b-form-group>

		<b-form-group class="input" label="Mode">
		    <b-form-radio v-model="time_diff" name="time_diff" v-bind:value="false"> sense clustering (CW) </b-form-radio>
		    <b-form-radio v-model="time_diff" name="time_diff" v-bind:value="true">time diff</b-form-radio>
    	</b-form-group>

    	<b-form-group class="input" label="Select a start year">
			<b-form-select v-model="start_year" :options="start_years" size="sm"></b-form-select>
		</b-from-group>

		<b-form-group class="input" label="Select an end year">
			<b-form-select v-model="end_year" :options="end_years" size="sm"></b-form-select>
		</b-from-group>

    	<b-button id="render_button" v-on:click="getURL()">Render Graph</b-button>
    </b-col>

    <b-col id="graph_display" sm="7">
    	<div id="graph2"></div>
    </b-col>

    <b-col id="graph_params" sm="2">
    	<p hidden v-if="graph_rendered"> {{ get_clusters() }}</p>

    	<b-card v-if="graph_rendered" class="name_clusters" id="assign_popup">
    		<b-card-text class="cluster_textbox">
    			<b-list-group v-for="cluster in clusters" :key="cluster.cluster_name">
					<b-list-group-item class="list-item">
						<!--
						<b-form-input class="color-select" type="color" :value="cluster.colour"> </b-form-input>
						-->
						<div class="overflow">
							<div class="clustername">
								<span class="dot" v-bind:style="{ 'background-color': cluster.colour }"></span>
								Cluster: <span class="bigger_font">{{ cluster.cluster_name }} </span>
							</div>
							<b-button id="edit_button" class="edit_button" v-on:click="showEditNameMask()"> Edit </b-button>
							
							<div>
								<b-button v-b-toggle="'collapse-' + cluster.cluster_name" id="accordion"> Nodes
									<span class="when-opened"><i class="fa fa-chevron-down" aria-hidden="true"></i></span>
          							<span class="when-closed"><i class="fa fa-chevron-up" aria-hidden="true"></i></span>
								</b-button>
								<b-collapse :id="'collapse-' + cluster.cluster_name" class="mt-2">
									<b-card>
									<p v-for="label in cluster.labels"> {{ label }}</p>
									</b-card>
								</b-collapse>
		                	</div>
			                <!--	
							<div style="margin-top: 10px;">
								<li>
									<ul v-for="label in cluster.labels"> {{ label }} </ul>
								</li>
							</div>
							-->
						</div>

					</b-list-group>
    			</b-list-group>
    		</b-card-text>
    	</b-card>

    	<b-card class="form-popup" id="loadpopup">
			<b-card-text> Select a .json file to render graph from</b-card-text>
			<b-form-file id="file_input" v-model="file" :state="Boolean(file)" placeholder="Choose a file..." drop-placeholder="Drop file here..."> </b-form-file>
			<b-button id="render_file_button" href="#" variant="success" v-on:click="loadGraph()">Render</b-button>
		    <b-button id="cancel_button" href="#" variant="danger" v-on:click="closeForm()">Close</b-button>
		</b-card>
    
    </b-col>
  </b-row>
</b-container> 
</div>
<script src="static/vue.js"></script>
</body>

</html>